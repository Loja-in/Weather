<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="shortcut icon" href="img/weathercock.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Wellfleet&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>Weather</title>
</head>
<body>
    <div class="container">
        <form action="#" id="form">
            <input type="text" class="search" id="Search-text" placeholder="Enter city name..." />
            <button type="submit" class="btn" id="enter"><img src="img/loupe.png"></button>
        </form>
        <div class="details">                
            <h1><sapn id="temp">20</sapn>Â°C</h1>
                <h2 id="city">
                    paris
                </h2>
        </div>
        <div class="section">
            <div class="article">
                <img src="img/humidity.png" id="icon">
                <div class="weather-details">
                    <p>
                    <span id="humidity">50</span>%
                    </p>
                </div>
            </div>
            <div class="article">
                <img src="https://shecodes-assets.s3.amazonaws.com/api/weather/icons/rain-day.png" id="temp-icon">
                <div class="weather-details">
                    <p>
                    <span id="description">Rainy</span>
                    </p>
                </div>
            </div>
            <div class="article">
                <img src="img/storm.png" id="icon">
                <div class="weather-details">
                    <p>
                    <span id="wind">10</span>km/h
                    </p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>
                Coded by <a href="https://www.shecodes.io/graduates/99170-lojain-nasr">Lojain Nasr</a>,
                on <a href="https://github.com/Loja-in">GitHub</a>
                and Hosted on <a href="">Netlify</a>.
            </p>
        </footer>
    </div>
    <script>
        function search(event) {
                event.preventDefault();
                let input = document.querySelector("#Search-text");
                let h2 = document.querySelector("#city");
                h2.innerHTML = `${input.value}`;
                let apiKey = "ec49etfea43b9bf6o7c77b0d49c77081";
                let city = input.value;
                let apiUrl = `https://api.shecodes.io/weather/v1/current?query=${city}&key=${apiKey}`;
                axios.get(apiUrl).then(displayWeather);
            }
            function displayWeather(response) {
                let cityElement = document.querySelector("#city");
                cityElement.innerHTML = response.data.city;
                let temperature = document.querySelector("#temp");
                temperature.innerHTML = Math.round(response.data.temperature.current);
                let humidity = document.querySelector("#humidity");
                humidity.innerHTML = Math.round(response.data.temperature.humidity);
                let wind = document.querySelector("#wind");
                wind.innerHTML = Math.round(response.data.wind.speed);
                let description = document.querySelector("#description");
                description.innerHTML = response.data.condition.description;
                if (description.innerHTML.length > 10) {
                    description.style.fontSize = "1.2rem";
                }
                let icon = document.querySelector("#temp-icon");
                icon.innerHTML = response.data.condition.icon_url;


            }
            let searchcity = document.querySelector("#enter");
            searchcity.addEventListener('click', search);

    </script>
</body>
</html>